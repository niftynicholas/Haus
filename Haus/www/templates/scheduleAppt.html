<ion-view view-title="Schedule Appointment">
    <ion-content>
        <h5 style="padding:8px; text-align:center;"><b>Schedule a face-to-face appointment to speak with a banker from one of our participating banks to finalize your loan.</b></h5>
        <div class="list list-inset">
            <a class="item item-icon-left item-icon-right" ng-click="openBankModal()">
                <i class="icon ion-social-usd"></i>
                <h2>Bank</h2>
                <p>{{selectedBank}}</p>
                <i class="icon ion-ios-arrow-right"></i>
            </a>
            <a class="item item-icon-left item-icon-right" ng-click="openBranchModal()" ng-if="hasSelectedBank()">
                <i class="icon ion-ios-navigate-outline"></i>
                <h2>Branch</h2>
                <p>{{selectedBranch}}</p>
                <i class="icon ion-ios-arrow-right"></i>
            </a>
            <div class="item item-icon-left item-icon-right" ion-datetime-picker date monday-first ng-model="$parent.selectedDate" ng-if="hasSelectedBranch()">
                <i class="icon ion-ios-calendar-outline"></i>
                <h2>Date</h2>
                <p id="date">{{selectedDate | date: "dd MMMM yyyy"}}</p>
                <i class="icon ion-ios-arrow-right"></i>
            </div>
            <a class="item item-icon-left item-icon-right" ng-click="openTimeModal()" ng-model="$parent.selectedTime" ng-if="selectedDate != 'Select a date'">
                <i class="icon ion-ios-clock-outline"></i>
                <h2>Time</h2>
                <p id="time">{{selectedTime}}</p>
                <i class="icon ion-ios-arrow-right"></i>
            </a>
        </div>
        <button class="button button-full button-positive" ng-click="scheduleAppt()">Confirm</button>
    </ion-content>
</ion-view>

<script id="bankModal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar class="bar-positive">
            <h1 class="title">Select Bank</h1>
            <button class="button button-clear button-primary" ng-click="closeBankModal()">Close</button>
        </ion-header-bar>
        <ion-content>
            <ion-list>
                <ion-item ng-repeat="bank in banks" ng-click="selectBank($index)">
                    {{bank.bankname}}
                </ion-item>
            </ion-list>
        </ion-content>
    </ion-modal-view>
</script>

<script id="branchModal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar class="bar-positive">
            <h1 class="title">Select Branch</h1>
            <button class="button button-clear button-primary" ng-click="closeBranchModal()">Close</button>
        </ion-header-bar>
        <ion-content>
            <ion-list>
                <ion-item ng-repeat="branch in branches" ng-click="selectBranch($index)">
                    {{branch.branchname}}
                </ion-item>
            </ion-list>
        </ion-content>
    </ion-modal-view>
</script>

<script id="timeModal.html" type="text/ng-template">
    <ion-modal-view>
        <ion-header-bar class="bar-positive">
            <h1 class="title">Select Time</h1>
            <button class="button button-clear button-primary" ng-click="closeTimeModal()">Close</button>
        </ion-header-bar>
        <ion-content>
            <ion-list>
                <ion-item ng-repeat="time in times" ng-click="selectTime($index)">
                    {{time.time}}
                </ion-item>
            </ion-list>
        </ion-content>
    </ion-modal-view>
</script>
